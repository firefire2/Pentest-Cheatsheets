# Enumeration for Linux
## LinEnumを利用した情報の列挙
SUIDのついたファイルやcrontabのエントリー，ユーザなどの一覧を列挙

Github<br>
https://github.com/rebootuser/LinEnum/blob/master/LinEnum.sh<br>
Fileのダウンロード<br>
https://github.com/rebootuser/LinEnum/raw/master/LinEnum.sh<br>

```sh
$ wget https://github.com/rebootuser/LinEnum/raw/master/LinEnum.sh
$ chmod +x LinEnum.sh
$ ./LinEnum.sh
```

## PEASSを利用した情報の列挙
同じく，privillege escalation向けに，SUIDのついたファイルを列挙

Github<br>
https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/linPEAS

## コマンドだけでSUIDファイルを列挙
スクリプトをダウンロードできない場合，findコマンドでSUIDのついたファイルを列挙
```sh
$ find / -perm -u=s -type f 2>/dev/null
```
### コマンドと引数の意味
find
- findコマンド

/
- ディスク全体を対象とするため / (ルート)

-perm
- 特定のパーミッションのファイルを検索

-u=s
- パーミッションにSUIDビットの立ったファイルを検索

-type f
- ファイルを検索

2>/dev/null
- エラー処理 

こんな感じなコマンドでもいい感じに列挙可能
```sh
$ find / -user root -perm -4000 -exec ls -ldb {} \;
```

## sudo設定の確認
```
$ sudo -l
```

```
User asterisk may run the following commands on this host:
    (root) NOPASSWD: /sbin/shutdown
    (root) NOPASSWD: /usr/bin/nmap
    (root) NOPASSWD: /usr/bin/yum
    (root) NOPASSWD: /bin/touch
    (root) NOPASSWD: /bin/chmod
    (root) NOPASSWD: /bin/chown
    (root) NOPASSWD: /sbin/service
    (root) NOPASSWD: /sbin/init
    (root) NOPASSWD: /usr/sbin/postmap
    (root) NOPASSWD: /usr/sbin/postfix
    (root) NOPASSWD: /usr/sbin/saslpasswd2
    (root) NOPASSWD: /usr/sbin/hardware_detector
    (root) NOPASSWD: /sbin/chkconfig
    (root) NOPASSWD: /usr/sbin/elastix-helper
```

## 特定の文字列が含まれるファイルの検索
パスワードが記述されているファイルなどを検索
```sh
$ find /opt -type f -exec grep -in "password" {} \+
```

```sh
$ grep password -rl /opt
```
